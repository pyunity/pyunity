environment:
  matrix:
    - version: "3.8"
      platform: "Linux"
      venv: "../../venv3.8"
    - version: "3.7"
      platform: "Linux"
      venv: "../../venv3.7"
    - version: "3.6"
      platform: "Linux"
      venv: "../../venv3.6"
    - version: "3.8"
      platform: "Windows"
      venv: "../../venv3.8"
    - version: "3.7"
      platform: "Windows"
      venv: "../../venv3.7"
    - version: "3.6"
      platform: "Windows"
      venv: "../../venv3.6"

for:
  -
    matrix:
      only:
        platform: "Linux"
    image: Ubuntu
    install:
      - source $venv/bin/activate
      - python -m pip install cython wheel sphinx
  -
    matrix:
      only:
        platform: "Windows"
    image: Visual Studio 2017
    install:
      - $venv/Scripts/activate
      - python -m pip install cython wheel sphinx

test_script:
  - set a=1
  - python3 prepare.py -x
  - python3 setup.py bdist_wheel -d ..
  - sphinx-build -T -E -b html docs/source docs/en

build: off
skip_branch_with_pr: true